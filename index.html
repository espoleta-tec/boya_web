<!DOCTYPE html>
<html>
<head>
  <title>BaterÃ­a</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js "></script>
</head>
<body>
  <h2>ğŸ”‹ BaterÃ­a</h2>
  <canvas id="batteryChart" width="600" height="300"></canvas>

  <script>
    let chart;

    function fetchData() {
      fetch('https://script.google.com/macros/s/AKfycbxORLE7cN3H6tlVqLxooAuBOkqkEh1vaOyzpoCQIgaKjoOfQEYvcyQeAkKSFArl4TdO/exec') // Pega la URL de tu Web App
        .then(res => res.json())
        .then(data => {
          const labels = data.map(d => d.timestamp);
          const batteryData = data.map(d => d.battery);

          if (!chart) {
            chart = new Chart(document.getElementById('batteryChart'), {
              type: 'line',
               {
                labels: labels,
                datasets: [{
                  label: 'BaterÃ­a (V)',
                   batteryData,
                  borderColor: 'rgba(255, 99, 132, 1)',
                  fill: false
                }]
              },
              options: {
                responsive: true,
                animation: false
              }
            });
          } else {
            chart.data.labels = labels;
            chart.data.datasets[0].data = batteryData;
            chart.update();
          }
        });
    }

    fetchData();
    setInterval(fetchData, 300000); // Actualiza cada 5 minutos
  </script>
</body>
</html>

